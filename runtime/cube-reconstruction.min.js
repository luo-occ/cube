/*!
  * Cube v5.0.0-beta.2
  */
  (function(){function a(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)(d||!(e in b))&&(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))}function b(){}function c(a){return a}function d(a){return'Cube.cStart();'+a+';Cube.cStop();'}function e(a,b){return fetch(a,{headers:{"Content-Type":'text/plain'}}).then(function(a){return a.text()}).then(function(a){return new Function((b||c)(a))()})}function f(a){var b=document.createElement('script');b.type='text/javascript',b.async=!0,b.onerror=function(){console.error('load module failed.')},b.src=a,m.appendChild(b)}function g(a,b){for(var c,d=a.length,e=0;e<d;e++)c=a[e],-1===c.indexOf(b)&&(0===c.indexOf('./')?a[e]=c.substr(1):'/'!==c[0]&&(a[e]='/'+c));return a}function h(a,b,c){var d=a;b&&(d=a.replace(n,function(a,c,d){var e=c.split(',').map(function(a){return b+' '+a.trim()});return e.join(',')+d}));var e=document.createElement('style');return e.setAttribute('type','text/css'),c&&e.setAttribute('mod',c),b&&e.setAttribute('ns',b),m.appendChild(e),e.innerHTML=d,d}function i(a){var b=a.split('&'),c={};return b.forEach(function(a){var b=a.split('=');c[b[0]]=b[1]}),c}function j(a,b){var c=b.base,d=b.remoteSeparator,e=b.remoteBase,f=c+a,g=a.indexOf?a.indexOf(d):0;if(0>=g)return f;var h=a.substr(0,g);return e[h]?e[h]+a.substr(g+1):f}function k(){return new Proxy({},{get:function(a,b){var c='number'===typeof b?b.toString():b;return Reflect.get(a,c)},set:function(a,b,c,d){var e='number'===typeof b?b.toString():b;return Reflect.set(a,e,c,d)}})}var l=function(){return l=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a},l.apply(this,arguments)},m=document.querySelector('head'),n=/([^};]+)(\{[^}]+\})/g,o={base:'',remoteBase:{},remoteSeparator:':',mockedProcess:{env:{NODE_ENV:'production'}},mockedGlobal:void 0,charset:'utf-8',strict:!0,esModule:!1,version:void 0,debug:!0,combine:!1,requestMethod:'fetch'},p=function(){function c(){var c=this;this.config=l({},o),this.state={inited:!0,isIntercepted:!1,pendingQueue:[],lostDepModule:{},entrances:new Map,cssModule:{},installedModules:k(),registerModules:[],requireMap:{},fileExecuting:!1},this.register=function(a,d,e){void 0===e&&(e={matchType:'version'});var f=e.matchType;return c._getReadyModule(a)?console.warn('Cube Warning: Module \''+a+'\' already registered'):void(c.state.installedModules[a]={exports:d,sourceCode:b,dep:[],refer:{upperDep:[],entryDep:[]},ready:!0,loaded:!0,firing:!1,fired:!0},'module'===f&&c.state.registerModules.push({moduleName:a,matchType:f,match:new RegExp('^datav:/npm/'.concat(a,'/([^/]+)?$')),module:c.state.installedModules[a]}))},this.init=function(a){var b,d,e,f,g;if(a.base&&'/'!==a.base&&(c.config.base=a.base.replace(/\/$/,'')),a.remoteBase)for(var h in a.remoteBase)a.remoteBase.hasOwnProperty(h)&&(c.config.remoteBase[h]=a.remoteBase[h].replace(/\/$/,''));for(c.config.version=null!==(b=a.version)&&void 0!==b?b:c.config.version,c.config.esModule=null!==(d=a.esModule)&&void 0!==d?d:c.config.esModule,c.config.debug=null!==(e=a.debug)&&void 0!==e?e:c.config.debug,c.config.combine=null!==(f=a.combine)&&void 0!==f?f:c.config.combine,c.config.requestMethod=null!==(g=a.requestMethod)&&void 0!==g?g:c.config.requestMethod,c.state.inited=!0;c.state.pendingQueue.length;){var i=c.state.pendingQueue.shift();c._load(i[0],i[1])}},this.use=function(d,e,f,h){if(!d)throw new Error('Cube.use(moduleName) moduleName is undefined!');var i,j='string'===typeof d?[d]:'number'===typeof d?[d.toString()]:a([],d,!0),k=h;'string'===typeof e?i=f:(i=e,k=f),i=i||b,j=k?j:g(j,c.config.remoteSeparator),c.state.entrances.set(j,{callback:i,loadSources:a([],j,!0)}),j.forEach(function(a){return c._load(a,j)})},this.execute=function(a,b,d){var e;'number'===typeof a&&(a=a.toString());var f=c._calibrateName(a);(null===(e=c.state.installedModules[f])||void 0===e?void 0:e.loaded)||(c._store(f,b,d),c._initiate(f))},this.css=function(a,b,d){if(a){var e=d+'@'+b;if(!c.state.cssModule[e])return c.state.cssModule[e]=!0,h(a,b,d)}},this._store=function(a,b,d){var e,f;if(null===(f=c.state.installedModules[a])||void 0===f||!f.loaded){var g=c.state.installedModules[a];g?((e=g.dep).push.apply(e,b),g.sourceCode=d,g.loaded=!0):c.state.installedModules[a]={exports:{},sourceCode:d,dep:b,refer:{upperDep:[],entryDep:[]},loaded:!0,ready:!1,firing:!1,fired:!1}}},this._load=function(a,b){if('number'===typeof a&&(a=a.toString()),!c.state.inited||c.state.fileExecuting)return void c.state.pendingQueue.push([a,b]);var g=c.state.installedModules[a];if(c._getReadyModule(a))return void c._triggerCallback(c._addReferToModule({upperDep:[],entryDep:[]},b));if(g)return void c._addReferToModule(g.refer,b);var h=a.split('?')[0];c.state.requireMap[h]=a,c.state.installedModules[a]={exports:{},sourceCode:void 0,dep:[],refer:{entryDep:[],upperDep:[]},loaded:!1,ready:!1,firing:!1,fired:!1},c._addReferToModule(c.state.installedModules[a].refer,b);var i=c._generatePath(a);'fetch'===c.config.requestMethod?e(i,d):f(i)},this._triggerCallback=function(a){a.upperDep.forEach(function(a){var b=c.state.installedModules[a];b&&c._initiate(a)}),a.entryDep.forEach(function(a){var b=c.state.entrances.get(a);b&&c._triggerEntryCallback(a)})},this._initiate=function(a){if(c.state.installedModules[a]&&!c.state.installedModules[a].ready){var b=c.state.installedModules[a];if(b){if(!b.loaded)return;if(b.dep.length){var d=!0;if(b.dep.forEach(function(b){var e=c._getModule(b);if(e){if(e.fired||e.firing||e.ready)return;if(c._isCursiveCausedUnready(b,a))return}d=!1,c._load(b,a)}),!d)return}}c.state.installedModules[a].ready=!0,c._triggerCallback(b.refer)}},this._triggerEntryCallback=function(a){var b=c.state.entrances.get(a);if(b&&b.loadSources.every(c._getReadyModule)){var d=!0;b.loadSources.forEach(function(a){var b=c._getModule(a);return b.fired?void 0:b.firing?void(d=!1):void(b.ready&&(c._fireModule(a),b.fired)||(d=!1))}),d&&(b.callback.apply(b,a.map(function(a){return c.state.installedModules[a].exports})),c.state.entrances.delete(a))}},this._fireModule=function(a){var b=c.state.installedModules[a];if(!b||!b.ready)return!1;if(b.fired)return!0;if(b.firing)return!0;var d=!0;try{b.firing=!0;var e=b.sourceCode.apply(window,[b,b.exports,c._cubeRequire(a),c._cubeLoad(a),c.config.mockedProcess,c.config.mockedGlobal]);b.exports=c._isEsModule(e)?e.default:e,b.error=!1}catch(c){'Cube inner denpendency lost; refetch inited'===c.message?(console.warn('Cube \u68C0\u6D4B\u5230\u6587\u4EF6\u4F9D\u8D56\u7F3A\u5931'),d=!1):(console.error('Cube \u751F\u6210\u5B9E\u4F8B\u5931\u8D25',c),console.error(a,b),b.error=!0)}finally{b.firing=!1,c.state.lostDepModule[a]?(b.ready=!1,c.state.lostDepModule[a].forEach(function(d){b.dep.includes(d)||(b.dep.push(d),c._load(d,a),console.warn('Cube module '.concat(a,' \u7F3A\u5931\u58F0\u660E\u4F9D\u8D56 ').concat(d)))}),Reflect.deleteProperty(c.state.lostDepModule,a),d=!1):b.fired=!0}return d},this._cubeRequire=function(a){return function(b,d){if(void 0===d){var e=c._getModule(b);if(null===e||void 0===e?void 0:e.fired)return e.exports;var f=c._fireModule(b);if(!e||!f)throw c.state.lostDepModule[a]?c.state.lostDepModule[a].push(b):c.state.lostDepModule[a]=[b],new Error('Cube inner denpendency lost; refetch inited');else return e.exports}else{var g=void 0,e=c._getReadyModule(b);if(!e)return;e.fired&&(g=e.exports);var h=c._fireModule(b);return h&&(g=e.exports),c.css(g,d,b)}}},this._cubeLoad=function(a){return function(b,d,e){void 0===e&&'function'===typeof d?(e=d,d='',c.use(b,a,e)):c.use(b,a,function(a){a=c.css(a,d,b),e&&e(a)})}},this._generatePath=function(a){var b=a.split('?'),d=b[0],e=b[1],f=j(d,c.config),g=[];if(c.config.version&&g.push(c.config.version),c.config.combine&&g.push('combine=true'),e){var h=i(e);g.push(Object.keys(h).map(function(a){return''.concat(a,'=').concat(h[a])}))}return g.includes('m=1')||g.push('m=1'),g.length&&(f=f+'?'+g.join('&')),f},this._addReferToModule=function(a,b){if(!b)return a;return'string'!==typeof b?a.entryDep.push(b):!a.upperDep.includes(b)&&a.upperDep.push(b),a},this._calibrateName=function(a){var b=c.state.requireMap[a]||a;return c.state.requireMap[a]&&Reflect.deleteProperty(c.state.requireMap,a),b},this._getGlobalRegister=function(a){for(var b,d=0,e=c.state.registerModules;d<e.length;d++)if(b=e[d],a&&b.match.test(a))return b.module},this._getReadyModule=function(a){var b=c._getModule(a);if(null===b||void 0===b?void 0:b.ready)return b},this._getModule=function(a){var b=c.state.installedModules[a];return b?b:c._getGlobalRegister(a)},this._isEsModule=function(a){return c.config.esModule&&a&&'object'===typeof a&&a.__esModule},this.cStart=function(){c.state.fileExecuting=!0},this.cStop=function(){for(c.state.fileExecuting=!1;c.state.pendingQueue.length;){var a=c.state.pendingQueue.shift();c._load(a[0],a[1])}},this._unResolveDep=function(a,b){var d;void 0===b&&(b=!1);var e=((null===(d=c.state.installedModules[a])||void 0===d?void 0:d.dep)||[]).filter(function(a){var b=c.state.installedModules[a];if(!b||!b.ready)return!0});if(b){for(var f=[e],g=0;5>g;)e=e.map(c._unResolveDep),f.push(e),g+=1;return f}return e},this.cache=function(){console.info('modules:',Object.fromEntries(Object.entries(c.state.installedModules))),console.info('unloaded:',Object.fromEntries(Object.entries(c.state.installedModules).filter(function(a){return!a[1].loaded}))),console.info('unfired:',Object.fromEntries(Object.entries(c.state.installedModules).filter(function(a){return!a[1].fired})))},this.debug=function(){console.error('debug \u65B9\u6CD5\u4E0D\u518D\u652F\u6301')},this.setRemoteBase=function(){console.error('\u4E0D\u652F\u6301\u52A8\u6001\u4FEE\u6539 remoteBase')}}return c.prototype._isCursiveCausedUnready=function(a,b){var c=this;if(a===b)return!0;var d=[a],e=!1,f=!1,g=500,h=function(){var a=[];d.some(function(b){var d=c.state.installedModules[b];return d&&d.loaded?void a.push.apply(a,d.dep):(e=!0,!0)}),a.includes(b)&&(f=!0),d=a,g-=1};do h();while(!f&&!e&&0<g&&0<d.length);return!!f},c}();(function(a){void 0===a&&(a='Cube');var b=window;if(b[a])return console.error('Cube Error: window.'+a+' already in using'),b[a];var c=new p,d=new Proxy(function(a,b,d){return c.execute(a,b,d)},{get:function(a,b){return Reflect.ownKeys(c).includes(b)?c[b]:Reflect.get(a,b)}});return b[a]=d,b[a]})()})();
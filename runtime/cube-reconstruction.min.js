/*!
  * Cube v5.0.0-beta.1
  */
  var a=this&&this.__assign||function(){return a=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c],b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a},a.apply(this,arguments)},b=this&&this.__spreadArray||function(a,b,c){if(c||2===arguments.length)for(var d,e=0,f=b.length;e<f;e++)(d||!(e in b))&&(d||(d=Array.prototype.slice.call(b,0,e)),d[e]=b[e]);return a.concat(d||Array.prototype.slice.call(b))};function c(){}function d(a){return a}function e(a,b){return fetch(a,{headers:{"Content-Type":'text/plain'}}).then(function(a){return a.text()}).then(function(a){return new Function((b||d)(a))()})}var f=document.querySelector('head');function g(a){var b=document.createElement('script');b.type='text/javascript',b.async=!0,b.onerror=function(){window.Cube(require,[],function(){console.error('load module: '.concat(require,' failed.'))})},b.src=a,f.appendChild(b)}function h(a,b){var c={};return function(d,e){return c[e]=d,Object.keys(c).length===a.length&&(b.apply(void 0,a.map(function(a){return c[a]})),!0)}}function i(a,b){for(var c,d=a.length,e=0;e<d;e++)c=a[e],-1===c.indexOf(b)&&(0===c.indexOf('./')?a[e]=c.substr(1):'/'!==c[0]&&(a[e]='/'+c));return a}var j=/([^};]+)(\{[^}]+\})/g;function k(a,b,c){var d=a;b&&(d=a.replace(j,function(a,c,d){var e=c.split(',').map(function(a){return b+' '+a.trim()});return e.join(',')+d}));var e=document.createElement('style');return e.setAttribute('type','text/css'),c&&e.setAttribute('mod',c),b&&e.setAttribute('ns',b),f.appendChild(e),e.innerHTML=d,d}function l(a){var b=a.split('&'),c={};return b.forEach(function(a){var b=a.split('=');c[b[0]]=b[1]}),c}function m(a,b){var c=b.base,d=b.remoteSeparator,e=b.remoteBase,f=c+a,g=a.indexOf?a.indexOf(d):0;if(0>=g)return f;var h=a.substr(0,g);return e[h]?e[h]+a.substr(g+1):f}var n={base:'',remoteBase:{},remoteSeparator:':',mockedProcess:{env:{NODE_ENV:'production'}},mockedGlobal:void 0,charset:'utf-8',strict:!0,esModule:!1,version:void 0,debug:!0,combine:!1,requestMethod:'fetch'};(function(){var d=function(){function d(){var f=this;this.config=a({},n),this.state={inited:!0,isIntercepted:!1,pendingQueue:[],lostDepModule:{},entrances:new Map,cssModule:{},installedModules:{},registerModules:[],requireMap:{}},this.register=function(a,b,d){void 0===d&&(d={matchType:'version'});var e=d.matchType;return f._getReadyModule(a)?console.warn('Cube Warning: Module \''+a+'\' already registered'):void(f.state.installedModules[a]={exports:b,sourceCode:c,dep:[],refer:{upperDep:[],entryDep:[]},ready:!0,loaded:!0,fired:!0},'module'===e&&f.state.registerModules.push({moduleName:a,matchType:e,match:new RegExp('^datav:/npm/'.concat(a,'/([^/]+)?$')),module:f.state.installedModules[a]}))},this.init=function(a){var b,c,d,e;if(a.base&&'/'!==a.base&&(f.config.base=a.base.replace(/\/$/,'')),a.remoteBase)for(var g in a.remoteBase)a.remoteBase.hasOwnProperty(g)&&(f.config.remoteBase[g]=a.remoteBase[g].replace(/\/$/,''));for(f.config.version=null!==(b=a.version)&&void 0!==b?b:f.config.version,f.config.esModule=null!==(c=a.esModule)&&void 0!==c?c:f.config.esModule,f.config.debug=null!==(d=a.debug)&&void 0!==d?d:f.config.debug,f.config.combine=null!==(e=a.combine)&&void 0!==e?e:f.config.combine,f.state.inited=!0;f.state.pendingQueue.length;){var h=f.state.pendingQueue.shift();f._load(h[0],h[1])}},this.use=function(a,d,e,g){if(!a)throw new Error('Cube.use(moduleName) moduleName is undefined!');var h,j='string'===typeof a?[a]:b([],a,!0),k=g;'string'===typeof d?h=e:(h=d,k=e),h=h||c,j=k?j:i(j,f.config.remoteSeparator),f.state.entrances.set(j,{callback:h,loadSources:b([],j,!0)}),f._load(j,j)},this.execute=function(a,b,c){var d,e=f._calibrateName(a);(null===(d=f.state.installedModules[e])||void 0===d?void 0:d.loaded)||(f._store(e,b,c),f._initiate(e))},this.css=function(a,b,c){if(a){var d=c+'@'+b;if(!f.state.cssModule[d])return f.state.cssModule[d]=!0,k(a,b,c)}},this._store=function(a,b,c){var d,e;if(!(null!==(e=f.state.installedModules[a])&&void 0!==e)||!e.loaded){var g=f.state.installedModules[a];g?((d=g.dep).push.apply(d,b),g.sourceCode=c,g.loaded=!0):f.state.installedModules[a]={exports:{},sourceCode:c,dep:b,refer:{upperDep:[],entryDep:[]},loaded:!0,ready:!1,fired:!1}}},this._load=function(a,b){return f.state.inited?void a.forEach(function(a){var c=f.state.installedModules[a];if(f._getReadyModule(a))return void f._triggerCallback(f._addReferToModule({upperDep:[],entryDep:[]},b));if(c)return void f._addReferToModule(c.refer,b);var d=a.split('?')[0];f.state.requireMap[d]=a,f.state.installedModules[a]={exports:{},sourceCode:void 0,dep:[],refer:{entryDep:[],upperDep:[]},loaded:!1,ready:!1,fired:!1},f._addReferToModule(f.state.installedModules[a].refer,b);var g=f._generatePath(a);e(g)}):void f.state.pendingQueue.push([a,b])},this._triggerCallback=function(a){a.upperDep.forEach(function(a){var b=f.state.installedModules[a];b&&f._initiate(a)}),a.entryDep.forEach(function(a){var b=f.state.entrances.get(a);b&&f._triggerEntryCallback(a)})},this._initiate=function(a){if(f.state.installedModules[a]&&!f.state.installedModules[a].ready){var b=f.state.installedModules[a];if(b){if(!b.loaded)return;if(b.dep.length){var c=!0;if(b.dep.forEach(function(b){f._getReadyModule(b)||f._checkCursiveDep(a,b)||(c=!1,f._load([b],a))}),!c)return}}f.state.installedModules[a].ready=!0,f._triggerCallback(b.refer)}},this._triggerEntryCallback=function(a){var b=f.state.entrances.get(a);b&&b.loadSources.every(f._getReadyModule)&&b.loadSources.every(f._fireModule)&&(b.callback.apply(b,a.map(function(a){return f.state.installedModules[a].exports})),f.state.entrances.delete(a))},this._fireModule=function(a){var b=f.state.installedModules[a];if(!b||!b.ready)return!1;if(b.fired)return!0;var c=!0;try{var d=b.sourceCode.apply(window,[b,b.exports,f._cubeRequire(a),f._cubeLoad(a),f.config.mockedProcess,f.config.mockedGlobal]);b.exports=f._isEsModule(d)?d.default:d,b.error=!1}catch(d){'Cube inner denpendency lost; refetch inited'===d.message?(console.warn('Cube \u68C0\u6D4B\u5230\u6587\u4EF6\u4F9D\u8D56\u7F3A\u5931'),c=!1):(console.error('Cube \u751F\u6210\u5B9E\u4F8B\u5931\u8D25',d),console.error(a,b),b.error=!0)}finally{f.state.lostDepModule[a]?(b.ready=!1,f.state.lostDepModule[a].forEach(function(c){b.dep.includes(c)||(b.dep.push(c),f._load([c],a),console.warn('Cube module '.concat(a,' \u7F3A\u5931\u58F0\u660E\u4F9D\u8D56 ').concat(c)))}),Reflect.deleteProperty(f.state.lostDepModule,a),c=!1):b.fired=!0}return c},this._cubeRequire=function(a){return function(b,c){if(void 0===c){var d=f._getModule(b);if(null===d||void 0===d?void 0:d.fired)return d.exports;if(f._checkCursiveDep(a,b))return console.error('Cube \u68C0\u6D4B\u5230\u5FAA\u73AF\u4F9D\u8D56 '.concat(b,' --> ').concat(a)),{};var e=f._fireModule(b);if(!d||!e)throw f.state.lostDepModule[a]?f.state.lostDepModule[a].push(b):f.state.lostDepModule[a]=[b],new Error('Cube inner denpendency lost; refetch inited');else return d.exports}else{var g=void 0,d=f._getReadyModule(b);if(!d)return;d.fired&&(g=d.exports);var e=f._fireModule(b);return e&&(g=d.exports),f.css(g,c,b)}}},this._cubeLoad=function(a){return function(b,c,d){d===void 0&&'function'===typeof c?(d=c,c='',f.use(b,a,d)):f.use(b,a,function(a){a=f.css(a,c,b),d&&d(a)})}},this._generatePath=function(a){var b=a.split('?'),c=b[0],d=b[1],e=m(c,f.config),g=[];if(g.push('m=1'),f.config.version&&g.push(f.config.version),f.config.combine&&g.push('combine=true'),d){var h=l(d);g.push(Object.keys(h).map(function(a){return''.concat(a,'=').concat(h[a])}))}return g.length&&(e=e+'?'+g.join('&')),e},this._addReferToModule=function(a,b){if(!b)return a;return'string'!==typeof b?a.entryDep.push(b):!a.upperDep.includes(b)&&a.upperDep.push(b),a},this._calibrateName=function(a){var b=f.state.requireMap[a]||a;return f.state.requireMap[a]&&Reflect.deleteProperty(f.state.requireMap,a),b},this._getGlobalRegister=function(a){for(var b,c=0,d=f.state.registerModules;c<d.length;c++)if(b=d[c],a&&b.match.test(a))return b.module},this._getReadyModule=function(a){var b=f._getModule(a);if(null===b||void 0===b?void 0:b.ready)return b},this._getModule=function(a){var b=f.state.installedModules[a];return b?b:f._getGlobalRegister(a)},this._isEsModule=function(a){return f.config.esModule&&a&&'object'===typeof a&&a.__esModule},this._checkCursiveDep=function(a,b){if(b===a)return!0;var c=[b],d=!1,e=6,g=function(){var b=[];c.forEach(function(a){var c=f.state.installedModules[a];c&&!c.fired&&b.push.apply(b,c.dep)}),b.includes(a)&&(d=!0),c=b,e-=1};do g();while(!1===d&&0<e&&0<c.length);return!!d},this.cache=function(){console.info('modules:',f.state.installedModules),console.info('unloaded:',Object.values(f.state.installedModules).filter(function(a){return!a.loaded})),console.info('unfired:',Object.values(f.state.installedModules).filter(function(a){return!a.fired}))},this.debug=function(){console.error('debug \u65B9\u6CD5\u4E0D\u518D\u652F\u6301')},this.setRemoteBase=function(){console.error('\u4E0D\u652F\u6301\u52A8\u6001\u4FEE\u6539 remoteBase')}}return d}();(function(a){void 0===a&&(a='Cube');var b=window;if(b[a])return console.error('Cube Error: window.'+a+' already in using'),b[a];var c=new d,e=new Proxy(function(a,b,d){return c.execute(a,b,d)},{get:function(a,b){return Reflect.ownKeys(c).includes(b)?c[b]:Reflect.get(a,b)}});return b[a]=e,b[a]})()})();